<?php
use Medoo\Medoo;

$ids = [10702,10703,10704,10705,10706,10707,10708,10709,10710,10711,10712,10713,10714,10715,10716,10717,10718,10719,10720,10721,10722,10723,10724,10725,10726,10727,10728,10729,10730,10731,10732,10733,10734,3435,3436,3437,3438,3439,3440,3441,3442,10751,3444,3445,3446,3447,3448,3449,3450,3451,3452,3453,3454,3455,3456,3457,3458,3459,3460,3461,10770,3463,3464,3465,3466,3467,3468,3469,3470,3471,3472,3473,3474,3475,3476,3477,3478,3479,3480,3481,3482,3483,3484,3485,3486,3487,3488,3489,3490,3491,3492,3493,3494,3495,5096,3497,3498,3499,3500,3501,3502,3503,3504,3505,3506,3507,3508,3509,3510,3511,3512,3513,3514,3515,10824,3517,3518,3519,3520,3521,3522,3523,3524,3525,3526,3527,3528,3529,3530,3531,3532,3533,3534,3535,3536,3537,3538,3539,3540,3541,10850,3543,3544,3545,3546,3547,3548,3549,3550,3551,3552,3553,3554,3555,3556,3557,3558,3559,5097,3561,3562,3563,3564,3565,3566,3567,3568,3569,3570,3571,3572,10881,3574,3575,3576,3577,3578,3579,3580,3581,3582,3583,3584,3585,3586,3587,3588,3589,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601,3602,3603,3604,3335,3336,3337,3338,3339,3340,3341,3342,10921,3344,3345,3346,3347,3348,3349,3350,3351,3352,3353,3354,3355,3356,3357,3358,3359,3360,3361,3362,3363,3364,3365,3366,3367,3368,3369,3370,3371,3372,3373,3374,3375,3376,3377,3378,3379,3380,3381,3382,3383,3384,3385,3386,10965,3388,3389,3390,3391,3392,3393,3394,3395,3396,3397,3398,3399,3400,3401,3402,3403,3404,3405,3406,3407,3408,3409,3410,3411,3412,3413,3414,3415,3416,3417,3418,3419,3420,3421,3422,3423,3424,3425,3426,3427,3428,3429,3430,3431,3820,3821,3822,3823,3824,3825,3826,3827,3828,3829,3830,3831,3832,3833,3834,3835,11134,3837,3838,3839,3840,3841,3842,3843,3844,3845,3846,3847,3848,3849,3850,3851,3852,3853,3854,3855,3856,3857,3858,3859,3860,3861,3862,3863,3864,3865,3866,3867,3868,3869,3870,3871,3872,3873,3874,3875,11174,3877,3878,3879,3880,3881,3882,3883,3884,3885,3886,3887,3888,3889,3890,3891,3892,3893,3894,3895,3896,3897,3898,3899,3900,3901,3902,3903,3904,3905,3906,3907,3908,3909,3910,3911,3912,3913,3914,3915,3916,3917,3918,3919,3920,3921,3922,3923,3924,3925,3926,3927,3928,3929,3930,3931,3932,3933,3934,3935,3936,3937,3938,3939,3940,3941,3942,3943,3944,3945,3946,3947,3948,3949,3950,3951,3952,5099,3954,3955,3956,3957,3958,3959,3960,3961,3962,3963,3964,3965,3966,3967,3968,3969,3970,3971,3972,11271,3974,3975,3976,3994,3995,3996,3997,3998,3999,4000,4001,4002,4003,4004,4005,4006,4007,4008,4009,4010,4011,4012,4013,4014,4015,4016,4017,4018,4019,4020,4021,4022,4023,4024,4025,4026,4027,4028,4094,4095,4096,4097,4098,4099,4100,4101,4102,4103,4104,4105,4106,4107,11539,4109,4110,4111,4112,4113,4114,4115,4116,4117,4118,4119,4120,4121,4122,4123,4124,4125,4126,4127,4128,4129,4130,4131,4132,4133,4134,4135,4136,4137,4138,4139,4140,4141,4142,4143,4144,4145,4146,4147,4148,4149,4150,4151,4152,4153,4154,4155,4156,4157,4158,4159,4160,4161,4162,11594,11595,4165,4166,4167,4168,4169,4170,4171,4172,4173,4174,11606,4176,4177,4178,4179,4180,4181,4182,4183,4184,11616,4186,4187,4188,4189,4190,4191,4192,4193,4194,4195,4196,11751,4361,4362,4363,4364,4365,11757,4367,4368,4369,4370,4371,4372,4373,11765,4375,4376,11768,4378,4379,4380,4381,4382,4383,11775,4385,4386,4387,4388,11780,4390,11782,11783,11784,11785,4395,4396,4397,11789,11790,11791,11792,11793,11794,11795,11796,11797,11798,11799,11800,11801,4411,4412,4413,4414,4415,4416,11808,11809,4419,11811,11812,11813,11814,11815,11816,11817,11818,11819,11820,4430,4431,4432,4433,4434,4435,4436,4437,11829,11830,4440,4441,11833,4443,11835,4445,4446,4447,11839,4449,11841,4451,4452,4453,4454,4455,4456,4457,11849,4459,4460,4461,4462,4463,4464,4465,4466,5123,4468,4469,4470,4471,4472,4473,11865,4475,4476,4477,4478,4479,4480,4481,4482,4483,4484,4485,4486,4487,4488,11880,11881,11882,4492,11884,4494,4495,11887,11888,11889,4499,11891,11892,11893,11894,11895,4505,11897,4507,11899,11900,4510,11902,11903,4513,11905,4515,4516,4517,4518,4519,11911,11912,11913,11914,4524,11916,4526,11918,11919,4529,11921,11922,4532,4533,11925,11926,11927,11928,4538,11930,11931,11932,11933,11934,4544,11936,11937,4547,11939,11940,4550,4551,4552,11944,11945,11946,11947,11948,4558,11950,11951,11952,4562,4563,4564,11956,4566,4567,4568,4569,4570,11962,11963,11964,11965,11966,11967,11968,11969,11970,11971,11972,4582,11974,4584,4585,11977,11978,4588,4589,4590,4591,4592,4593,4594,11986,4596,11988,11989,4599,4600,11992,11993,11994,4604,11996,4606,4607,4608,12000,12001,12002,12003,4707,4708,12222,4710,4711,4712,12226,4714,4715,4716,4717,4718,4719,4720,4721,4722,4723,4724,4725,4726,4727,4728,12242,4730,4731,4732,4733,4734,4735,4736,4737,4738,4739,4740,4741,4742,4743,4744,4745,4746,4747,4748,4749,4750,4751,4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765,4766,5124,12281,4769,12283,4771,12285,4773,4774,4775,4776,4777,12291,4779,12293,4781,4782,4783,4784,4785,4786,4787,4788,4789,4790,4791,4792,4793,4794,4795,4796,4797,4798,4799,4800,4801,4802,4803,4804,4805,4806,4807,4808,4809,4810,4811,4812,4813,4814,4815,4816,4817,4818,4819,4820,4821,12335,4823,4824,4825,4826,4827,4828,12342,4830,4831,4832,4833,4834,4835,4836,4837,4838,12352,4840,4916,4917,4876,4877,4878,4879,4880,4881,4882,4883,4884,4885,4886,4887,12382,4889,4890,4891,4892,4893,4894,4895,4896,4897,4898,4899,4900,4901,12396,4903,12398,4905,4906,4907,4908,4909,4910,4911,4912,4913,4914,12409,11010,11011,11012,11013,11014,11015,11016,11017,11018,11019,11020,11021,11022,11023,11024,11025,11026,11027,11028,11029,11030,11031,11032,11033,11034,11035,11036,11037,11038,11039,11040,11041,11042,11043,11044,11045,11046,11047,11048,11049,11050,11051,11052,11053,11054,11055,11056,11057,11058,11059,11060,11061,11062,11063,11064,11065,11066,11067,11068,11069,11070,11071,11072,11073,11074,11075,11076,11077,11078,11079,11080,11081,11082,11083,11084,11085,11628,11629,11630,11631,11632,11633,11634,11635,11636,11637,11638,12004,12005,12006,12007,12008,12009,12010,12011,12012,12013,12014,12015,12016,10735,10736,10737,10738,10739,10740,10741,10742,11086,11087,11088,11089,11090,11091,11092,11093,11094,11095,11096,11097,11098,11099,11100,11101,11102,11103,11104,11105,11106,11107,11108,11109,11110,11111,11112,11113,11114,11115,11116,11117,11310,11311,11312,11313,11314,11315,11316,11317,11318,11319,11320,11321,11322,11323,11324,11325,11326,11327,11328,11329,11330,11331,11332,11333,11334,11335,11336,11337,11338,11339,11340,11341,11342,11343,11344,11345,11346,11347,11348,11349,11350,11351,11352,11353,11354,11355,11356,11357,11358,11359,11360,11361,11362,11363,11364,11365,11366,11367,11368,11369,11370,11371,11372,11373,11374,11375,11376,11377,11378,11379,11380,11381,11382,11383,11384,11385,11386,11387,11388,11389,11390,11391,11392,11393,11394,11395,11396,11397,11398,11399,11400,11401,11402,11403,11404,11405,11406,11407,11408,11409,11410,11411,11412,11413,11414,11415,11416,11417,11418,11419,11420,11421,11422,11423,11424,11425,11426,11427,11428,11429,11430,11431,11432,11433,11434,11435,11436,11437,11438,11439,11440,11441,11442,11443,11444,11445,11446,11447,11448,11449,11450,11451,11452,11453,11454,11455,11456,11457,11458,11459,11460,11461,11462,11463,11464,11465,11466,11467,11468,11469,11470,11471,11472,11473,11474,11475,11476,11477,11478,11479,11480,11481,11482,11483,11484,11485,11486,11487,11488,11489,11490,11491,11492,11493,11494,11495,11496,11497,11498,11499,11500,11501,11502,11503,11504,11505,11506,11507,11508,3978,11510,3980,3981,3982,3983,3984,3985,3986,3987,3988,3989,3990,3991,3992,3993,11639,11640,11641,11642,11643,11644,11645,11646,11647,11648,11649,11650,11651,11652,11653,11654,11655,11656,11657,11658,11659,11660,11661,11662,11663,11664,11665,11666,11667,11668,11669,11670,11671,11672,11673,11674,11675,11676,11677,11678,11679,11680,11681,11682,11683,11684,11685,11686,11687,11688,11689,11690,11691,11692,11693,11694,11695,11696,11697,11698,11699,11700,11701,11702,11703,11704,11705,11706,11707,11708,11709,11710,11711,11712,11713,11714,11715,11716,11717,11718,11719,11720,11721,11722,11723,11724,11725,11726,11727,11728,11729,11730,11731,11732,11733,11734,11735,11736,11737,11738,11739,11740,11741,11742,11743,11744,11745,11746,11747,11748,11749,11750,12017,12018,12019,12020,12021,12022,12023,12024,12025,12026,12027,12028,12029,12030,12031,12032,12033,12034,12035,12036,12037,12038,12039,12040,12041,12042,12043,12044,12045,12046,12047,12048,12049,12050,12051,12052,12053,12054,12055,12056,12057,12058,12059,12060,12061,12062,12063,12064,12065,12066,12067,12068,12069,12070,12071,12072,12073,12074,12075,12076,12077,12078,12079,12080,12081,12082,12083,12084,12085,12086,12087,12088,12089,12090,12091,12092,12093,12094,12095,12096,12097,12098,12099,12100,12101,12102,12103,12104,12105,12106,12107,12108,12109,12110,12111,12112,12113,12114,12115,12116,12117,12118,12119,12120,12121,12122,12123,12124,12125,12126,12127,12128,12129,12130,12131,12132,12133,12134,12135,12136,12137,12138,12139,12140,12141,12142,12143,12144,12145,12146,12147,12148,12149,12150,12151,12152,12153,12154,12155,12156,12157,12158,12159,12160,12161,12162,12163,12164,12165,12166,12167,12168,12169,12170,12171,12172,12173,12174,12175,12176,12177,12178,12179,12180,12181,12182,12183,12184,12185,12186,12187,12188,12189,12190,12191,12192,12193,12194,12195,12196,12197,12198,12199,12200,12201,12202,12203,12204,12205,12206,12207,12208,12209,12210,12211,12212,12213,12214,12215,12216,12217,12218,12219,12354,12355,12356,12357,12358,12359,12360,12361,12362,12363,12364,12365,12366,12367,12410,12411,12412,12413,12414,12415,12416];

require './medoo.php';

$database = new medoo([
    // 必须配置项
    'database_type' => 'mysql',
    'database_name' => 'jiakao',
    'server' => 'localhost',
    'username' => 'root',
    'password' => '',
    'charset' => 'utf8',
 
    // // 可选参数
    // 'port' => 3306,
 
 
    // // 连接参数扩展, 更多参考 http://www.php.net/manual/en/pdo.setattribute.php
    'option' => [
		PDO::ATTR_CASE => PDO::CASE_NATURAL
	],
]);
 


function get($id)
{
	global $database;
	$curl = curl_init();

	curl_setopt_array($curl, array(
	  CURLOPT_URL => 'http://www.jkstk.com/data/'.$id.'.txt',
	  CURLOPT_RETURNTRANSFER => true,
	  CURLOPT_ENCODING => "",
	  CURLOPT_MAXREDIRS => 10,
	  CURLOPT_TIMEOUT => 30,
	  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
	  CURLOPT_CUSTOMREQUEST => "GET",
	  CURLOPT_POSTFIELDS => "",
	  CURLOPT_HTTPHEADER => array(
	    "cache-control: no-cache"
	  ),
	));

	$response = curl_exec($curl);
	if(substr($response, 0, 3) == pack("CCC", 0xEF, 0xBB, 0xBF)) {
	    $response = substr($response, 3);
	}

	$err = curl_error($curl);

	curl_close($curl);

	if ($err) {
	  echo "cURL Error #:" . $err;
	} else {
		$data = json_decode($response,true);
	    unset($data['id']);

	    $database->insert('question_bank_km4_b2',$data);
	    echo $response;
	    echo "\n";
	}
}

function getSafeStr($str){
    $s1 = iconv('gbk','utf-8//IGNORE',$str);
    $s0 = iconv('utf-8','gbk//IGNORE',$s1);
    if($s0 == $str){
        return $s1;
    }else{
        return $str;
    }
}


foreach ($ids as $id) {
	get($id);
}