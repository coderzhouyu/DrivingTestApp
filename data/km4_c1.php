<?php
use Medoo\Medoo;

$ids =[3102,3071,3072,3073,3074,3075,3076,3077,3078,3079,4093,3103,3104,3105,3106,3080,3081,3082,3083,3084,3085,3086,3087,3088,3089,3090,3091,3092,3093,3094,3095,3096,3097,3098,3099,3100,3101,3143,3144,3145,3146,3319,9561,3147,3148,3149,3150,3151,3152,3153,3154,3155,3156,3157,3158,3159,3321,3322,3323,3324,3325,3326,3327,3328,3160,3161,3162,3163,3164,3165,3329,3330,3331,3166,3167,3168,3169,3170,3171,3172,3173,3174,3175,3176,3292,3293,3294,3295,3177,3178,3179,3180,3181,3182,3183,3184,3185,3186,3187,3188,3189,3190,3191,3192,3193,3194,3195,3196,3197,3198,3199,3200,3201,3202,3203,3204,3205,3296,3297,3206,3207,3208,3209,3210,3211,3212,3213,3298,3299,3300,3301,3302,3214,3215,3216,3217,3218,3219,3220,3221,3222,3223,3224,3225,3226,3227,3228,3229,3230,3231,3232,6958,3317,3318,3233,3234,3332,3333,3334,3288,3289,3290,3291,3235,3236,3237,3238,3239,3240,3241,3303,3304,3305,3306,3307,3242,3243,3244,3245,3246,3247,3248,3249,3250,3251,3252,3253,3254,3255,3256,3257,3258,3259,3308,7001,3260,3261,3262,3263,3264,3265,3266,3267,3268,3269,3270,3309,3310,3311,3271,3272,3273,3274,3275,3276,3277,3278,3279,3280,3281,3282,3312,3283,3284,3285,3286,3287,3313,3314,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617,3618,3619,3620,3621,3622,3623,3624,3625,3626,3627,3628,3629,3630,3631,3632,3633,3634,3635,3636,3637,3638,3639,3640,3641,3642,3643,3644,3645,7213,3647,3648,7216,3650,3651,3652,3653,3654,3655,3656,3657,3658,3659,3660,3661,3662,3663,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,3676,3677,3678,3679,3680,3681,3682,3683,3684,3685,3686,5098,3688,3689,3690,3691,3692,3693,3694,3695,3696,3697,3698,3699,3700,3701,3702,3703,3704,3705,3706,3707,3708,3709,3710,3711,3712,3713,3714,3715,3716,3717,3718,3719,3720,3721,3722,3723,3724,3725,3726,3727,3728,3729,3730,3731,3732,3733,3734,3735,3736,3737,3738,3739,3740,3741,3742,3743,3744,3745,3746,3747,3748,3749,3750,7318,3752,3753,10091,10092,3756,3757,3758,3759,3760,3761,3762,3763,3764,3765,3766,3767,3768,3769,3770,3771,3772,3773,3774,3775,3776,3777,3778,3779,3780,3781,3782,3783,3784,3785,3786,3787,3788,3789,3790,3791,3792,3793,3794,3795,3796,3797,3798,3799,3817,3818,3819,10140,3801,10142,3803,3804,3805,3806,3807,3808,3809,3810,3811,3812,3813,3814,3815,3816,4029,4030,4031,4032,4083,4033,4034,4035,4084,4085,4086,4087,4036,4037,4038,4039,4040,4041,4042,4043,4044,4045,4046,4047,4048,4049,4050,4051,4052,4053,4054,4055,4056,4088,4089,4057,4058,4059,4060,4061,4062,4090,4063,4064,4065,4066,4067,4091,4068,4069,4070,4071,10209,4073,4074,4075,4076,4077,4078,4079,4080,4092,4197,4198,4199,4200,4201,4202,4081,4082,4327,4328,4329,4330,4331,4203,4204,4205,4206,4207,4208,4209,4210,4211,4212,4213,4214,4215,4216,4217,4218,4219,4220,7588,4222,4223,4224,4225,4226,4227,4228,4229,4230,4231,4232,4332,4333,4334,4335,4336,4337,4338,4339,4340,4233,4234,4235,4236,4237,4238,4239,4240,4341,4342,4343,4344,4345,4346,4347,4348,4349,4350,4351,4241,4242,4243,4244,4245,4246,4247,4248,4249,4250,4251,4252,4253,4254,4255,4256,4257,4258,4352,4353,4354,4355,4356,7651,4358,4359,4259,4260,4261,4262,4263,4264,4265,4266,4267,4268,4269,4270,4271,4272,4273,4274,4275,4276,4277,4278,4279,4280,4281,4282,4283,4284,4285,4286,4287,4288,4289,4290,4291,4292,4293,4294,4295,4296,4297,4298,4299,4300,4301,4302,4303,4304,4305,4306,4307,4308,4309,4310,4311,4312,4313,4314,4315,4316,4317,4318,4319,4320,4321,4322,4323,4324,4325,4326,4613,4614,4615,4616,7780,4618,4619,4620,4621,4622,4623,4624,4625,4626,4627,4628,4629,4630,4631,4632,4633,4634,4635,4636,4637,4638,4639,4640,4641,4642,4643,4644,4645,4646,4647,4648,4649,4650,4651,4652,4653,4654,4655,4656,4657,4658,4659,4660,4661,4662,4663,4664,4665,4666,4667,4668,4669,4670,4671,7835,4673,4674,4675,4676,4677,4678,4679,4680,4681,4682,4683,4684,4685,4686,4687,4688,4689,4690,4691,4692,4693,4694,4695,4696,4697,4698,4699,4700,4701,4702,4703,4704,4705,4841,4842,4843,4844,10663,4846,4847,4848,4849,4850,4851,4852,4853,4854,4855,4856,4857,4858,4859,4860,4861,4862,4863,4864,4865,4866,4867,4868,4869,4870,4871,4872,4873,4874,4875,5035,9749,5045,5052,5065,7041,5070,5090,5061,5048,7046,5066,5053,5073,5074,5055,5029,7053,7054,5038,5051,5071,5082,5083,5037,5057,5092,5063,5034,7065,7066,9779,5084,5036,5043,5022,5044,5054,5039,5041,5091,5069,5079,5076,5068,5080,5031,5075,5081,7085,5085,5086,5049,5094,5077,5042,5046,5030,5040,5087,5021,5020,5025,5028,5033,5050,5027,5024,5023,5060,7106,7107,5026,5067,5047,5072,5088,5102,5105,5103,5107,5106,5109,5110,5100,5101,5104,5108,5117,5114,7724,7725,5111,7727,5119,5115,5121,5120,5113,5112,5127,7460,10231,5377,5482,5305,5328,5329,5330,5331,5332,5333,5368,5370,5371,5372,5378,5379,5380,5381,5382,5383,5384,5397,5398,5399,5400,5401,5402,5409,5410,5411,5412,5413,5414,5415,5416,5417,5418,5419,5420,5421,5422,5448,5449,5450,5451,5452,5453,5461,5483,5484,5485,5486,5487,5488,5489,5490,5491,5492,5306,5307,5308,5309,5310,5311,5312,5313,5314,5315,5316,5317,5318,5319,5320,5321,5327,5334,5335,5336,5337,5338,5339,5340,5341,5343,5344,5345,5346,5347,5348,5358,5359,5360,5361,5369,5373,5374,5375,5376,5385,5386,5387,5388,5389,5390,5391,5392,5403,5404,5405,5406,5407,5408,5423,5424,5425,5426,5427,5428,5429,5430,5431,5432,5433,5434,5435,5436,5437,5438,5447,5454,5455,5456,5457,5458,5459,5460,5462,5463,5464,5465,5466,5467,5468,5469,5470,5471,5472,5473,5474,5475,5476,5477,5478,5299,5300,5301,5302,5304,5342,5349,5350,5351,5352,5353,5354,5355,5356,5357,5362,5363,5364,5365,5366,5367,5479,5480,5481,5303,5322,5323,5393,5394,5395,5439,5440,5441,5442,5443,5444,5324,5325,5326,5396,5445,5446,6843,7168,7169,7170,7171,7759,7760,7761,7762,7763,7764,7765,7766,7767,7768,7769,7770,7771,7772,7773,7774,7775,7881,7882,7883,10546,10657,10547,10548,10658,10700,10701,12417,12418,12419,12420,12421,12422,12423,12424,12425,12426,12434,12435,12436,12437,12438,12439,12440,12441,12442,12427,9884,9885,9886,9887,9888,9889,9890,9891,9892,9893,12443,12444,12445,12446,12447,12448,12449,12428,12429,12430,9894,9895,9896,9897,9898,9899,9900,9901,9902,9903,9904,9905,9906,9907,9908,9909,9910,9911,9912,9913,9914,9915,9916,9917,9918,9919,9920,9921,9922,9923,12431,12432,12433,12450,12451,12452,12453,12454,12455,12456,12457,12458,12459,12460,12461,12462,12463,12464,12465,12466,9924,9925,9926,9927,9928,9929,9930,9931,9932,9933,9934,9935,9936,9937,9938,9939,9940,9941];

require './medoo.php';

$database = new medoo([
    // 必须配置项
    'database_type' => 'mysql',
    'database_name' => 'jiakao',
    'server' => 'localhost',
    'username' => 'root',
    'password' => '',
    'charset' => 'utf8',
 
    // // 可选参数
    // 'port' => 3306,
 
 
    // // 连接参数扩展, 更多参考 http://www.php.net/manual/en/pdo.setattribute.php
    'option' => [
		PDO::ATTR_CASE => PDO::CASE_NATURAL
	],
]);
 


function get($id)
{
	global $database;
	$curl = curl_init();

	curl_setopt_array($curl, array(
	  CURLOPT_URL => 'http://www.jkstk.com/data/'.$id.'.txt',
	  CURLOPT_RETURNTRANSFER => true,
	  CURLOPT_ENCODING => "",
	  CURLOPT_MAXREDIRS => 10,
	  CURLOPT_TIMEOUT => 30,
	  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
	  CURLOPT_CUSTOMREQUEST => "GET",
	  CURLOPT_POSTFIELDS => "",
	  CURLOPT_HTTPHEADER => array(
	    "cache-control: no-cache"
	  ),
	));

	$response = curl_exec($curl);
	if(substr($response, 0, 3) == pack("CCC", 0xEF, 0xBB, 0xBF)) {
	    $response = substr($response, 3);
	}

	$err = curl_error($curl);

	curl_close($curl);

	if ($err) {
	  echo "cURL Error #:" . $err;
	} else {
		$data = json_decode($response,true);
	    unset($data['id']);

	    $database->insert('question_bank_km4',$data);
	    echo $response;
	    echo "\n";
	}
}

function getSafeStr($str){
    $s1 = iconv('gbk','utf-8//IGNORE',$str);
    $s0 = iconv('utf-8','gbk//IGNORE',$s1);
    if($s0 == $str){
        return $s1;
    }else{
        return $str;
    }
}


foreach ($ids as $id) {
	get($id);
}